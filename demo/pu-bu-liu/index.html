<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>瀑布流demo</title>
	<style>
		*{margin: 0;padding: 0;}
		.waterfall{width: 960px;margin: 10px auto;position: relative;}
		.waterfall .flow{width: 310px;background: #333;position: absolute;border:1px solid #ccc;box-shadow: #ccc 2px 3px 3px;-webkit-transition:all 3s;}
		.flowItem{width:100%;font-size:42px;color: #fff;text-align: center;}
	</style>
</head>
<body>
		<div class="waterfall" id="waterfall">
		    <div class="flow"><div class="flowItem" style="height: 100px;">1</div></div>
		    <div class="flow"><div class="flowItem" style="height: 200px;">2</div></div>
		    <div class="flow"><div class="flowItem" style="height: 150px;">3</div></div>
		    <div class="flow"><div class="flowItem" style="height: 400px;">4</div></div>
		    <div class="flow"><div class="flowItem" style="height: 180px;">5</div></div>
		    <div class="flow"><div class="flowItem" style="height: 120px;">6</div></div>
		    <div class="flow"><div class="flowItem" style="height: 300px;">7</div></div>
		    <div class="flow"><div class="flowItem" style="height: 100px;">8</div></div>
		    <div class="flow"><div class="flowItem" style="height: 120px;">9</div></div>
		    <div class="flow"><div class="flowItem" style="height: 105px;">10</div></div>
		    <div class="flow"><div class="flowItem" style="height: 180px;">11</div></div>
		    <div class="flow"><div class="flowItem" style="height: 120px;">12</div></div>
		    <div class="flow"><div class="flowItem" style="height: 300px;">13</div></div>
		    <div class="flow"><div class="flowItem" style="height: 100px;">14</div></div>
		    <div class="flow"><div class="flowItem" style="height: 120px;">15</div></div>
		    <div class="flow"><div class="flowItem" style="height: 105px;">16</div></div>
		</div>

		<script>
			var waterfall = document.getElementById('waterfall');
			var flowItems = waterfall.querySelectorAll('.flow');

			var pin = [];
			pin[0] = flowItems[0].offsetTop + flowItems[0].offsetHeight;
			pin[1] = flowItems[1].offsetTop + flowItems[1].offsetHeight;
			pin[2] = flowItems[2].offsetTop + flowItems[2].offsetHeight;

			for(var i = 0, len = flowItems.length; i < len; i++){
				if(i >= 3){
					var minH = Math.min.apply(null,pin);
					var minHItem = pin.indexOf(minH);
					flowItems[i].style.left = minHItem * (310 + 15) + 'px';
					flowItems[i].style.top = minH + 15 + 'px';
			
					pin[minHItem] += flowItems[i].offsetHeight + 15;
				}else if(i < 3){
					flowItems[i].style.top = 0;
					flowItems[i].style.left = (i % 3) * (310 + 15) + 'px';
				}
			}

			

		</script>
</body>
</html>